import { useState, useRef, useEffect } from "react";
import styles from "./styles.module.css";
const AudioPlayer = () => {
  const audioRef = useRef(null);
  const [isPlaying, setIsPlaying] = useState(false);
  const [currentTime, setCurrentTime] = useState(0);

  useEffect(() => {
    const audio = audioRef.current;
    const updateProgressBar = () => {
      setCurrentTime(audio.currentTime);
    };
    audio.addEventListener("timeupdate", updateProgressBar);
    return () => {
      audio.removeEventListener("timeupdate", updateProgressBar);
    };
  }, []);

  const togglePlayPause = () => {
    if (isPlaying) {
      audioRef.current.pause();
    } else {
      audioRef.current.play();
    }
    setIsPlaying(!isPlaying);
  };

  const backward15 = () => {
    if (audioRef.current.currentTime>=15) audioRef.current.currentTime -= 15;
    else audioRef.current.currentTime = 0;
  };

  const forward15 = () => {
    audioRef.current.currentTime += 15;
  };


  return (
    <div className="container">
      <audio style={{ display: "none" }} ref={audioRef} controls>
        <source src="audio.mp3" type="audio/mp3" />
        Your browser does not support the audio element.
      </audio>

      <div id={styles.progressBar}>
        <input type="range" min="0" readOnly max="42" value={currentTime} />
      </div>
      <div id={styles.time}>
        <p>00:00</p>
        <p>00:42</p>
      </div>
      <div id={styles.controls}>
        <svg
          width="32"
          height="32"
          viewBox="0 0 32 32"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M10.6666 15.1107L24.2973 6.024C24.3977 5.9572 24.5143 5.91887 24.6348 5.91311C24.7552 5.90735 24.875 5.93436 24.9813 5.99128C25.0876 6.0482 25.1765 6.13289 25.2385 6.23633C25.3005 6.33976 25.3333 6.45808 25.3333 6.57867L25.3333 25.4213C25.3333 25.5419 25.3005 25.6602 25.2385 25.7637C25.1765 25.8671 25.0876 25.9518 24.9813 26.0087C24.875 26.0656 24.7552 26.0927 24.6348 26.0869C24.5143 26.0811 24.3977 26.0428 24.2973 25.976L10.6666 16.8893L10.6666 25.3333C10.6666 25.687 10.5262 26.0261 10.2761 26.2761C10.0261 26.5262 9.68693 26.6667 9.33331 26.6667C8.97969 26.6667 8.64055 26.5262 8.3905 26.2761C8.14045 26.0261 7.99998 25.687 7.99998 25.3333L7.99998 6.66667C7.99998 6.31305 8.14045 5.97391 8.3905 5.72386C8.64055 5.47381 8.97969 5.33334 9.33331 5.33334C9.68693 5.33334 10.0261 5.47381 10.2761 5.72386C10.5262 5.97391 10.6666 6.31305 10.6666 6.66667V15.1107ZM22.6666 21.684L22.6666 10.316L14.1413 16L22.6666 21.684Z"
            fill="white"
          />
        </svg>

        <svg
          id={StyleSheet.back15}
          onClick={backward15}
          width="32"
          height="32"
          viewBox="0 0 32 32"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clipPath="url(#clip0_2_283)">
            <path
              d="M7.28398 26.0893C9.70339 28.1858 12.7986 29.3378 16 29.3333C23.364 29.3333 29.3333 23.364 29.3333 16C29.3333 8.636 23.364 2.66667 16 2.66667C8.63598 2.66667 2.66665 8.636 2.66665 16C2.66665 18.848 3.55998 21.488 5.07998 23.6533L9.33331 16H5.33331C5.33351 13.5416 6.18289 11.1588 7.73775 9.25452C9.29261 7.35029 11.4575 6.04159 13.8662 5.54981C16.2749 5.05803 18.7795 5.41336 20.9564 6.55569C23.1333 7.69802 24.8487 9.55722 25.8126 11.8188C26.7765 14.0803 26.9296 16.6054 26.246 18.9669C25.5624 21.3283 24.0841 23.3811 22.0612 24.7781C20.0383 26.175 17.5949 26.8304 15.1445 26.6332C12.694 26.436 10.3868 25.3984 8.61331 23.696L7.28398 26.0893Z"
              fill="white"
            />
            <path
              d="M13.304 14.68L12.168 15.68L11.488 14.896L13.336 13.336H14.456V19H13.304V14.68ZM19.8704 14.392H17.6224L17.5984 15.264C17.721 15.2213 17.889 15.2 18.1024 15.2C18.3904 15.2 18.6544 15.2427 18.8944 15.328C19.1344 15.4133 19.3397 15.5387 19.5104 15.704C19.6864 15.864 19.8224 16.0613 19.9184 16.296C20.0144 16.5253 20.0624 16.784 20.0624 17.072C20.0624 17.392 20.0064 17.6773 19.8944 17.928C19.7877 18.1787 19.6384 18.392 19.4464 18.568C19.2544 18.7387 19.025 18.8693 18.7584 18.96C18.497 19.0507 18.2117 19.096 17.9024 19.096C17.4117 19.096 17.001 18.976 16.6704 18.736C16.3397 18.496 16.113 18.1333 15.9904 17.648L17.2464 17.36C17.2784 17.5627 17.3637 17.728 17.5024 17.856C17.641 17.9787 17.8144 18.04 18.0224 18.04C18.2784 18.04 18.481 17.96 18.6304 17.8C18.785 17.64 18.8624 17.4373 18.8624 17.192C18.8624 17.0053 18.8224 16.8533 18.7424 16.736C18.6677 16.6133 18.5664 16.5173 18.4384 16.448C18.3157 16.3733 18.177 16.3227 18.0224 16.296C17.8677 16.2693 17.713 16.256 17.5584 16.256C17.361 16.256 17.161 16.2747 16.9584 16.312C16.761 16.3493 16.569 16.4 16.3824 16.464L16.4464 13.336H19.8704V14.392Z"
              fill="white"
            />
          </g>
          <defs>
            <clipPath id="clip0_2_283">
              <rect
                width="32"
                height="32"
                fill="white"
                transform="matrix(-1 0 0 1 32 0)"
              />
            </clipPath>
          </defs>
        </svg>
        {isPlaying ? (
          <svg
            onClick={togglePlayPause}
            width="72"
            height="72"
            viewBox="0 0 72 72"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clipPath="url(#clip0_2_287)">
              <path
                d="M36 66C19.431 66 6 52.569 6 36C6 19.431 19.431 6 36 6C52.569 6 66 19.431 66 36C66 52.569 52.569 66 36 66ZM27 27V45H33V27H27ZM39 27V45H45V27H39Z"
                fill="white"
              />
            </g>
            <defs>
              <clipPath id="clip0_2_287">
                <rect width="72" height="72" fill="white" />
              </clipPath>
            </defs>
          </svg>
        ) : (
          <svg
            onClick={togglePlayPause}
            xmlns="http://www.w3.org/2000/svg"
            width="72"
            height="72"
            viewBox="0 0 72 72"
            fill="none"
          >
            <g clipPath="url(#clip0_2_287)">
              <path
                d="M36 66C19.431 66 6 52.569 6 36C6 19.431 19.431 6 36 6C52.569 6 66 19.431 66 36C66 52.569 52.569 66 36 66ZM27 27V45H33V27H27ZM39 27V45H45V27H39Z"
                fill="white"
              ></path>
              <circle cx="36" cy="36" r="30" fill="white"></circle>
              <path d="M27 25V52L50.5516 36L27 20Z" fill="black"></path>
            </g>
            <defs>
              <clipPath id="clip0_2_287">
                <rect width="72" height="72" fill="white"></rect>
              </clipPath>
            </defs>
          </svg>
        )}
        <svg
          onClick={forward15}
          width="32"
          height="32"
          viewBox="0 0 32 32"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clipPath="url(#clip0_2_290)">
            <path
              d="M24.716 26.0893C22.2966 28.1858 19.2014 29.3378 16 29.3333C8.63602 29.3333 2.66669 23.364 2.66669 16C2.66669 8.636 8.63602 2.66667 16 2.66667C23.364 2.66667 29.3334 8.636 29.3334 16C29.3334 18.848 28.44 21.488 26.92 23.6533L22.6667 16H26.6667C26.6665 13.5416 25.8171 11.1588 24.2623 9.25452C22.7074 7.35029 20.5425 6.04159 18.1338 5.54981C15.7251 5.05803 13.2205 5.41336 11.0436 6.55569C8.86672 7.69802 7.15125 9.55722 6.18739 11.8188C5.22352 14.0803 5.07043 16.6054 5.75401 18.9669C6.43759 21.3283 7.91588 23.3811 9.9388 24.7781C11.9617 26.175 14.4051 26.8304 16.8555 26.6332C19.306 26.436 21.6132 25.3984 23.3867 23.696L24.716 26.0893Z"
              fill="white"
            />
            <path
              d="M13.304 14.68L12.168 15.68L11.488 14.896L13.336 13.336H14.456V19H13.304V14.68ZM19.8704 14.392H17.6224L17.5984 15.264C17.721 15.2213 17.889 15.2 18.1024 15.2C18.3904 15.2 18.6544 15.2427 18.8944 15.328C19.1344 15.4133 19.3397 15.5387 19.5104 15.704C19.6864 15.864 19.8224 16.0613 19.9184 16.296C20.0144 16.5253 20.0624 16.784 20.0624 17.072C20.0624 17.392 20.0064 17.6773 19.8944 17.928C19.7877 18.1787 19.6384 18.392 19.4464 18.568C19.2544 18.7387 19.025 18.8693 18.7584 18.96C18.497 19.0507 18.2117 19.096 17.9024 19.096C17.4117 19.096 17.001 18.976 16.6704 18.736C16.3397 18.496 16.113 18.1333 15.9904 17.648L17.2464 17.36C17.2784 17.5627 17.3637 17.728 17.5024 17.856C17.641 17.9787 17.8144 18.04 18.0224 18.04C18.2784 18.04 18.481 17.96 18.6304 17.8C18.785 17.64 18.8624 17.4373 18.8624 17.192C18.8624 17.0053 18.8224 16.8533 18.7424 16.736C18.6677 16.6133 18.5664 16.5173 18.4384 16.448C18.3157 16.3733 18.177 16.3227 18.0224 16.296C17.8677 16.2693 17.713 16.256 17.5584 16.256C17.361 16.256 17.161 16.2747 16.9584 16.312C16.761 16.3493 16.569 16.4 16.3824 16.464L16.4464 13.336H19.8704V14.392Z"
              fill="white"
            />
          </g>
          <defs>
            <clipPath id="clip0_2_290">
              <rect width="32" height="32" fill="white" />
            </clipPath>
          </defs>
        </svg>
        <svg
          width="32"
          height="32"
          viewBox="0 0 32 32"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clipPath="url(#clip0_2_294)">
            <path
              d="M21.3334 16.8893L7.70269 25.976C7.60229 26.0428 7.48566 26.0811 7.36521 26.0869C7.24476 26.0927 7.125 26.0656 7.01869 26.0087C6.91237 25.9518 6.82349 25.8671 6.76151 25.7637C6.69952 25.6602 6.66675 25.5419 6.66669 25.4213V6.57867C6.66675 6.45808 6.69952 6.33976 6.76151 6.23632C6.82349 6.13288 6.91237 6.0482 7.01869 5.99128C7.125 5.93436 7.24476 5.90734 7.36521 5.9131C7.48566 5.91887 7.60229 5.95719 7.70269 6.024L21.3334 15.1107V6.66667C21.3334 6.31304 21.4738 5.97391 21.7239 5.72386C21.9739 5.47381 22.3131 5.33333 22.6667 5.33333C23.0203 5.33333 23.3594 5.47381 23.6095 5.72386C23.8595 5.97391 24 6.31304 24 6.66667V25.3333C24 25.687 23.8595 26.0261 23.6095 26.2761C23.3594 26.5262 23.0203 26.6667 22.6667 26.6667C22.3131 26.6667 21.9739 26.5262 21.7239 26.2761C21.4738 26.0261 21.3334 25.687 21.3334 25.3333V16.8893ZM9.33335 10.316V21.684L17.8587 16L9.33335 10.316Z"
              fill="white"
            />
          </g>
          <defs>
            <clipPath id="clip0_2_294">
              <rect width="32" height="32" fill="white" />
            </clipPath>
          </defs>
        </svg>
      </div>
    </div>
  );
};

export default AudioPlayer;
